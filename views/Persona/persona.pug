include ../layout.pug

block scripts
    script.
        function toggleFields() {
            const rol = document.getElementById('rol').value;
            const matriculaField = document.getElementById('matriculaField');
            const especialidadField = document.getElementById('especialidadField');
            const pacienteFields = document.getElementById('pacienteFields');

            matriculaField.style.display = (rol === 'medico' || rol === 'enfermero') ? 'block' : 'none';
            especialidadField.style.display = (rol === 'medico') ? 'block' : 'none';
            pacienteFields.style.display = (rol === 'paciente') ? 'block' : 'none';
        }

        document.addEventListener('DOMContentLoaded', () => {
            toggleFields();
            document.getElementById('rol').addEventListener('change', toggleFields);
        });

block content 
    form(action="/persona/add" method="POST")
        div
            label(for="nombre") Nombre:
            input#nombre(type="text" name="nombre" required)
        div
            label(for="apellido") Apellido:
            input#apellido(type="text" name="apellido" required)
        div
            label(for="dni") DNI:
            input#dni(type="text" name="dni" required)
        div
            label(for="edad") Edad:
            input#edad(type="number" name="edad" min="0" required)
        div
            label(for="fechaNacimiento") Fecha de Nacimiento:
            input#fechaNacimiento(type="date" name="fechaNacimiento" required)
        div
            label(for="genero") Género:
            select#genero(name="genero" required)
                option(value="") Seleccione una opción
                option(value="masculino") Masculino
                option(value="femenino") Femenino
                option(value="otro") Otro
        div
            label(for="telefono") Teléfono:
            input#telefono(type="tel" name="telefono" required)
        div
            label(for="rol") Rol:
            select#rol(name="rol" required onchange="toggleFields()")
                option(value="") Seleccione un rol
                option(value="administrador") Administrador
                option(value="paciente") Paciente
                option(value="medico") Médico
                option(value="enfermero") Enfermero
        div#matriculaField(style="display: none;")
            label(for="matricula") Número de Matrícula:
            input#matricula(type="text" name="matricula")
        div#especialidadField(style="display: none;")
            label(for="especialidad") Especialidad:
            input#especialidad(type="text" name="especialidad")
        div#pacienteFields(style="display: none;")
            label(for="numeroEmergencia") Número de Emergencia:
            input#numeroEmergencia(type="text" name="numeroEmergencia")
            label(for="seguroMedico") Seguro Médico:
            input#seguroMedico(type="text" name="seguroMedico")
        div
            button(type="submit") Guardar
